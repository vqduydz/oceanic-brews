<ion-content class="container">
  <div class="header">
    <ion-buttons>
      <ion-button [routerLink]=" origin || '/menus'">
        <ion-icon color="light" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

    @if(!error){ @if(currentUser){ @if ( !liked ) {
    <ion-buttons (click)="toggleLike(menu.menu.id)">
      <ion-button>
        <ion-icon color="light" name="heart-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    } @else {
    <ion-buttons (click)="toggleLike(menu.menu.id)">
      <ion-button>
        <ion-icon color="light" name="heart"></ion-icon>
      </ion-button>
    </ion-buttons>
    }}}
  </div>
  @if(menuLoaded){ @if (error) {
  <p>Error link</p>
  } @else {

  <div class="card">
    <div class="image">
      <app-image
        style="border-radius: 50%; display: block"
        [imgUrl]="menu.imgPath+menu.menu.imgUrl"
      />
      <!-- <ion-img [src]="menu.imgPath+menu.menu.imgUrl" [alt]=""></ion-img> -->
    </div>
    <div style="display: block" class="card-title block">
      <h1 class="ion-no-margin">{{menu.menu.name}}</h1>
      <h5 class="ion-no-margin">
        <app-rating
          [initialRating]="4.75"
          [size]="'0.8rem'"
          [space]="1"
          [readonly]="true"
        />
        4.75
        <i>(1.212 lượt đánh giá)</i>
      </h5>
      <p class="ion-no-marign">{{menu.menu.price | number }}<span>vnđ</span></p>
    </div>
    <div class="desc block">
      <h2>Mô tả "{{menu.menu.name}}"</h2>
      <p>{{menu.menu.desc}}</p>
    </div>
    <div class="suggested-menus block">
      <h2 class="ion-no-margin">Gợi ý các món cùng danh mục</h2>
      <div class="menus">
        @if(suggestedMenus){ @for (menu of suggestedMenus.menus; track $index) {
        <app-menu-card
          (menuCardClicked)="goToDetail(menu.slug)"
          [menu]="menu"
          [imgPath]="suggestedMenus.imgPath"
        ></app-menu-card>
        } }@else {
        <p>Loading...</p>
        }
      </div>
    </div>
    <div class="reviews block">
      <div class="reviews-header">
        <h2 class="ion-no-margin">
          Đánh giá của khách hàng về "{{menu.menu.name}}"
        </h2>
        <div class="rating-container">
          <app-rating
            class="rating"
            [initialRating]="4.75"
            [size]="'1rem'"
            [space]="2"
            [readonly]="true"
          />
          4.75
          <i>(1.212 lượt)</i>
        </div>
      </div>
      <div class="review">
        <div class="review-header">
          <div class="rating-container">
            <app-rating
              class="rating"
              [initialRating]="5"
              [size]="'1rem'"
              [space]="2"
              [readonly]="true"
            />
            <ion-img
              src="assets/images/verified.png"
              title="Chứng nhận đã mua hàng"
            ></ion-img>
          </div>
          <i class="ion-no-margin">30:50-20/04/2024</i>
        </div>
        <p>Bởi :&nbsp;Duy vũ</p>
        <p class="ion-no-margin">Ngon như cơm mẹ nấu</p>
      </div>
      <div class="review2">
        <div class="review-header">
          <div class="rating-container">
            <app-rating
              class="rating"
              [initialRating]="1"
              [size]="'1rem'"
              [space]="2"
              [readonly]="true"
            />
            <ion-img
              src="assets/images/verified.png"
              title="Chứng nhận đã mua hàng"
            ></ion-img>
          </div>
          <i class="ion-no-margin">30:50-20/04/2024</i>
        </div>
        <p>Bởi :&nbsp;Cứt Nát</p>
        <p class="ion-no-margin">Như shit</p>
      </div>

      <div class="review">
        <div class="review-header">
          <div class="rating-container">
            <app-rating
              class="rating"
              [initialRating]="2"
              [size]="'1rem'"
              [space]="2"
              [readonly]="true"
            />
            <ion-img
              src="assets/images/verified.png"
              title="Chứng nhận đã mua hàng"
            ></ion-img>
          </div>
          <i class="ion-no-margin">30:50-20/04/2024</i>
        </div>
        <p>Bởi :&nbsp;Hải Nhót</p>
        <p class="ion-no-margin">Dở vl</p>
      </div>
    </div>
  </div>
  <div class="btn">
    <ion-button> Add to Cart </ion-button>
  </div>
  } }@else {
  <div class="card">Loading...</div>
  }
</ion-content>
